### 📊 Sitrep — onde o CMS ainda “escorrega”

| Área                       | Hoje (visto nos screenshots)                                                                                                                   | Gargalo para o time Itaicy                                           |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| **Navegação**              | Sidebar mostra páginas & “Ferramentas” misturadas. Trocar de “Página Inicial > Conteúdo” para “Página Inicial > SEO” exige 2 cliques + scroll. | Carga cognitiva alta → erro de contexto (“onde estou mexendo?”).     |
| **Blocos de conteúdo**     | Lista vertical sem mini-preview; ordem via botão “Adicionar Bloco” (top-right) mas não é possível arrastar.                                    | Difícil visualizar a página como o visitante vê; reorder demorado.   |
| **Campos de edição**       | Campos genéricos (Título / Subtítulo / URL vídeo) mudam conforme bloco, mas não há **hints**, contador de caracteres ou validação de imagem.   | Risco de quebrar layout (ex.: título gigante) ou subir vídeo >10 MB. |
| **Biblioteca de mídia**    | Menu existe, mas fluxo não mostrado (parece abrir nova tela). Nos blocos a URL ainda aparece em texto.                                         | Editor não percebe se já há imagem no bucket, nem vê preview.        |
| **SEO**                    | Aba separada, mas edição não puxa automaticamente imagem OG nem slug; keywords é campo texto “solto”.                                          | Metadados inconsistentes; mais trabalho manual.                      |
| **Feedback de salvamento** | Botão “Salvar” dentro do bloco, mas sem snackbar ou auto-reload.                                                                               | Incerteza se realmente publicou.                                     |
| **Roles / Workflow**       | Não aparece status Draft / Review / Published.                                                                                                 | Sem trilha de auditoria → medo de publicar direto em produção.       |

---

## 🔧 Mudanças recomendadas (UX + Produto)

### 1. Arquitetura & Navegação

| Mudança                                                        | Como                                                        | Benefício                               |
| -------------------------------------------------------------- | ----------------------------------------------------------- | --------------------------------------- |
| **Separar claramente** “Páginas” ⇢ “Coleções” ⇢ “Configuração” | Three-pane layout: ① Site Map, ② Block Canvas, ③ Properties | Usuário sempre sabe onde está editando. |
| **Breadcrumb dinâmico**                                        | ex. *Home › Hero Block › Vídeo*                             | Contexto persistente, reduz cliques.    |

### 2. Page Canvas visual

* **Preview thumbnail** em cada bloco (auto-screenshot da seção ou ícone + label).
* **Drag-and-drop** reorder (use `@dnd-kit`) – drop-zones mostram spacing tokens.
* **Inline “+” inserção** entre blocos, com menu de tipos (Hero, Gallery, Stats, FAQ…).

### 3. Edição assistida

* Modal / side panel com **field-level helpers**:

  * Título (contagem 0 / 60 chars)
  * Rich-text `Tiptap` w/ slash commands for bullets, bold.
  * **Media picker**: botão “Selecionar da Biblioteca” ou “Upload”.
* **Guards**: upload ≤ 8 MB, dimensões mín. 1920 px, alt-text requerido.

### 4. Biblioteca de Mídia de verdade

| Funcionalidade                                         | Detalhe                                                                       |
| ------------------------------------------------------ | ----------------------------------------------------------------------------- |
| Grid gallery com filtros (imagens / vídeos / docs)     | Carrega do bucket Supabase via signed URL                                     |
| Lado direito: preview & meta (size, type, usage count) | Mostra onde a mídia está usada (ref-tracking table)                           |
| Transform on insert                                    | Escolhe focal point, crop, qualidade; backend gera variantes `webp` + `avif`. |

### 5. SEO in-context

* Aba “SEO” **dentro** do modal da página (mesmos campos) – quando salva, atualiza `page.seo` JSON.
* **Autofill** slug, canonical & OG image (última imagem do bloco hero, mas pode sobrescrever).
* Live **Google snippet preview** (title + description).

### 6. Workflow & Roles

| Papel   | Permissão           | UI feedback                                   |
| ------- | ------------------- | --------------------------------------------- |
| Editor  | Criar/editar Draft  | Badge “Rascunho” nos blocos/páginas           |
| Revisor | Mudar para “Review” | Botão “Enviar para aprovação”                 |
| Admin   | Publicar            | Botão “Publicar” + toast “Página publicada ✔” |

Audit-log table (`action`, `user`, `entity`, `before`, `after`).

### 7. Feedback & performance

* Global snackbar (“Alterações salvas”, “Erro de validação”).
* Optimistic UI → revalidação no background; fallback toasts se falhar.
* Skeleton loaders nas listas para evitar “tela vazia”.

---

## 📋 Backlog de tarefas (priorizado)

| ID           | Tarefa                                                       | Owner | Pts |
| ------------ | ------------------------------------------------------------ | ----- | --- |
| **NAV-01**   | Refatorar layout para 3-pane (SiteMap / Canvas / Properties) | FE    | 5   |
| **BLK-01**   | Implementar Block drag-and-drop + preview thumbnails         | FE    | 8   |
| **MEDIA-01** | Media Library component (grid, upload, meta)                 | FE+BE | 8   |
| **MEDIA-02** | Supabase Edge Function gerar variantes & blurhash            | BE    | 5   |
| **EDIT-01**  | Properties panel com validation helpers + media picker       | FE    | 5   |
| **SEO-01**   | SEO panel in-context + snippet preview                       | FE    | 3   |
| **WF-01**    | Status enum + RLS policies + audit\_log                      | BE    | 5   |
| **UX-01**    | Snackbar + optimistic save hooks                             | FE    | 3   |
| **QA-01**    | Usability test script + SUS scoring                          | PM/UX | 2   |

*Total ≈ 44 pts (≈ 4.5 weeks).*

---

## 🌟 Resultado esperado

* **Time Itaicy edita página completa em < 2 min.** (medido em teste).
* Zero URLs quebradas; todas imagens servidas otimamente.
* SEO fields completos diretamente no fluxo de edição.
* Conteúdo publicado passa por workflow – segurança e rastreabilidade.
* UX score > 80/100 → adoção sem dependência do dev.

Implementando essas mudanças o CMS deixa de ser “formulário com abas” e vira **ferramenta editorial moderna**, comparável a Webflow ou Sanity, mas 100 % no stack Supabase/React que já temos.
