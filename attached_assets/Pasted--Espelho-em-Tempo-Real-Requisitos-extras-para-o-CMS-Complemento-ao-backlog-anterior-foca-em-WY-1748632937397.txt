â€œEspelho em Tempo-Realâ€ â€” Requisitos extras para o CMS
(Complemento ao backlog anterior â€” foca em WYSIWYG real, preview e heurÃ­sticas de Nielsen).

1. Espelhamento visual da pÃ¡gina
Necessidade	SoluÃ§Ã£o TÃ©cnica	HeurÃ­stica Nielsen
Ver fielmente o layout e a ordem atual dos blocos	iFrame Live Preview carregando a rota pÃºblica com draftToken (query-string). O CMS injeta o HTML novo em shadow-DOM e recalcula CSS tokens â€” sem publicar.	â€œVisibilidade do status do sistemaâ€ & â€œCorrespondÃªncia entre sistema e mundo realâ€
Garantir que as miniaturas mostrem o bloco como ele aparece	Durante drag-over faz html2canvas do bloco na iFrame e gera thumb base64 (cache Supabase Storage).	â€œReconhecimento mais que recordaÃ§Ã£oâ€
Mostrar se a ordem foi alterada	Barra lateral de blocos traz nÃºmero de ordem dinÃ¢mico + highlight se diverge da versÃ£o publicada.	â€œFeedback imediatoâ€

2. Preview antes de salvar / publicar
Feature	Detalhe
Side-by-Side Diff	Toggle â€œVer diferenÃ§asâ€ abre split-screen: Publicado (esq.) Ã— Draft (dir.) com diff-highlight (vermelho/verde) em texto, imgs e removed sections.
Painel de Alertas	Valida responsividade (usa @thorin plugin) â†’ se heading quebra, mostra alerta â€œTÃ­tulo excede largura em mobileâ€.
Modo Dispositivo	Controles tablet/mobile (CSS @media + scalefactor).

3. Biblioteca de mÃ­dia com screenshot automÃ¡tico
Cada upload gera:

original,

web-optimized (85 % quality),

Low-Quality Image Placeholder (LQIP) para thumbs.

Quando editor escolhe vÃ­deo, CMS captura frame 1 s âœ gera JPG 1280â€Špx (poster) para SEO/OG.

4. Fluxo de publicaÃ§Ã£o â€œSafe-Shipâ€
Passo	AÃ§Ã£o	Feedback
1 â€“ Rascunho	Auto-save a cada 3 s (debounce).	Toast â€œSalvoâ€ + Ã­cone nuvem âœ…
2 â€“ Revisar	BotÃ£o â€œPrÃ©-Visualizarâ€ abre nova aba full-screen com draftToken.	Banner laranja: â€œVersÃ£o de teste â€“ nÃ£o indexadoâ€.
3 â€“ Aprovar & Publicar	Revisor clica â€œPublicarâ€. Build hook revalida Rotas (Next.js revalidateTag).	Modal sucesso + link â€œVer ao vivoâ€.

5. Checklist de HeurÃ­sticas de Nielsen aplicado
#	HeurÃ­stica	ImplementaÃ§Ã£o no CMS
1	Visibilidade do status	Snackbars, Ã­cone de salvamento ao vivo, indicador de conexÃ£o Supabase.
2	Match com mundo real	Canvas Ã© a prÃ³pria pÃ¡gina (iFrame), nomenclatura de blocos idÃªntica (Hero, FAQâ€¦).
3	Controle & liberdade	Undo / Redo global (zustand history) e botÃ£o â€œReverter para publicadoâ€.
4	ConsistÃªncia & padrÃµes	BotÃµes, cores = tokens UI do site. Mesmos Ã­cones lucide.
5	PrevenÃ§Ã£o de erros	Validadores (tamanho img, vÃ­deo > 10 MB, campo SEO vazio).
6	Reconhecimento	Thumbs + previews = menos memÃ³ria.
7	Flexibilidade	Shortcuts: âŒ˜+P preview, âŒ˜+S save.
8	EstÃ©tica & minimalismo	Properties panel sÃ³ mostra campos do bloco selecionado.
9	Ajuda ao diagnosticar erros	Toast vermelho com logId + link â€œver detalhesâ€.
10	Ajuda & documentaÃ§Ã£o	Tooltip â€œ?â€ abre side-doc Markdown (FAQs rÃ¡pidas).

6. Tarefas incrementais (adicionar ao backlog)
ID	Task	Owner	Pts
PREV-01	Implementar iFrame live-preview com draftToken & hot-reload (Vite HMR)	FE	5
PREV-02	html2canvas thumbnail generator + caching	FE	3
DIFF-01	Build side-by-side diff viewer (text + image)	FE	5
MEDIA-03	LQIP & poster frame generation (Edge Function)	BE	4
UX-02	Undo/Redo with global state history	FE	3
VAL-01	Real-time content validators & warning pane	FE	3

Add these to previous 44 pts â†’ ~63 pts (â‰ˆ 6 weeks total sprint).

ğŸ¯ Resultado esperado apÃ³s esta fase
WYSIWYG autÃªntico â€“ equipe edita â€œvendoâ€ o site real.

Zero deploy anxiety â€“ visual diff & preview antes de publicar.

Nielsen-compliant UX â€“ reduz erros, aumenta adoÃ§Ã£o.

ConteÃºdo rico (imagens, vÃ­deos, blog) gerido sem dev.

Assim o Itaicy terÃ¡ um best-in-class CMS que reflete o hotel: transparente, sustentÃ¡vel e focado na experiÃªncia do usuÃ¡rio.