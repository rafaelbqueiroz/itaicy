TUDO EM JSON E NA RAIZ DO SITE NAO ESTOU CONSEGUINDO ACESSAR O SITE. O QUE VC ENTENDE DISSO? OS DADOS DO JSON NAO SAO OS MESMOS DO SITE. ESTA ME PARECENDO QUE NAO SAO DADOS EXTRAIDOS DO SITE, MAS INVENTADOS

O ChatGPT disse:

Pensou por 8 segundos
O que (provavelmente) aconteceu ‚Äî e por que tudo aparece como ‚ÄúJSON cru‚Äù
Sintoma	Causa t√©cnica mais comum	Evid√™ncia
1. Raiz do site (/) redireciona p/ CMS	Ordem das rotas trocada. O agente colocou <Route path="/" element={<CMS ‚Ä¶/>}/> antes da rota p√∫blica ou substituiu o componente Home pelo CMS para depurar.	Navega√ß√£o some, apenas painel.
2. Blocos carregam JSON inventado	Script de ‚Äúextra√ß√£o‚Äù caiu no fallback dummy (os dados hard-coded no seed), porque
‚Ä¢ N√£o conseguiu ler os arquivos React/MDX na build
‚Ä¢ Ou falhou ao converter HTML ‚Üí JSON (erro silencioso)	Campos image:"https://images.unsplash‚Ä¶", textos em ingl√™s que nunca existiram no site.
3. Biblioteca de M√≠dia / Configura√ß√µes s√≥ dizem ‚Äúem desenvolvimento‚Äù	Somente esqueleto de UI, sem binding a media_library nem global_settings.	
4. Header/logo truncado no topo do CMS	CSS do CMS sobrep√¥s position:relative do header ou removeu <header> global para evitar duplicidade.	

Check-list para reverter r√°pido üçÄ
Restaurar front p√∫blico

No client/src/App.tsx garanta:

tsx
Copiar
Editar
<Route path="/cms/*" element={<CmsDashboard/>} />
<Route path="/*" element={<PublicSiteRouter/>} />   // SEMPRE depois da rota do CMS
Se o componente Home foi sobrescrito, reinstale da √∫ltima vers√£o no Git / backup.

Carregar de fato o conte√∫do do site

Simplificar o extractor: ler direto dos props que j√° est√£o no c√≥digo (export const homeBlocks = [...]) em vez de tentar ‚Äúraspar‚Äù HTML.

Popular as tabelas pages / blocks apenas se estiverem vazias (on conflict do nothing), para n√£o sobrescrever depois.

Validar no log: Inserted 8 blocks for / deve listar exatamente ‚Äúhero-video‚Äù, ‚Äúsplit-block-1‚Äù‚Ä¶ etc.

Esconder JSON do usu√°rio

UI de bloco ‚ûú formul√°rio guiado: Title, Subtitle, Image picker, CTA (text + href).

JSON fica no banco, mas o editor mostra campos amig√°veis (usando zod para parse / validate).

Biblioteca de M√≠dia

Bucket media no Supabase. Listagem files.list(), upload com createSignedUploadUrl.

No editor de bloco, <MediaPicker onSelect={url => setFieldValue('image',url)} />.

Autentica√ß√£o / Seguran√ßa

/cms protegido com Supabase Auth (magic link).

Policies: role cms_admin pode insert/update; an√¥nimos apenas select where published=true.

Rollback f√°cil

Mantenha script sql/backup_blocks.sql que exporta conte√∫do em JSONB ‚Üí download antes de cada seed.

Instru√ß√µes m√≠nimas para o replit-agent (copie/cole)
text
Copiar
Editar
## 1. Restaurar site p√∫blico
- Reverter qualquer altera√ß√£o em client/src/pages/Home.* ou componentes globais.
- CMS deve viver em /cms (sub-route) sem afetar bundle p√∫blico.

## 2. Re-seed correto
- Ler origem dos blocos em client/blocks/**/*.ts
- Preencher tabelas pages(id uuid, slug, name) e blocks(id uuid, page_id, type, position, data jsonb, published bool).
- Rodar seed somente se SELECT count(*) FROM blocks = 0.

## 3. UI amig√°vel
- Dentro de /cms crie <BlockForm> que mapeia:
  - hero-video: title, subtitle, videoUrl, ctaPrimary{text,url}, ctaSecondary...
  - split-block: image, label, title, bullets (array), cta{text,url}
- Salvar ‚Üí update blocks set draft = data, published = false.
- Bot√£o ‚ÄúPublicar bloco‚Äù copia draft ‚Üí data, published = true.

## 4. Media library
- Supabase bucket "media"; list, preview thumb 150‚Ääpx.
- Drag-&-drop upload ‚Üí returns public URL.
- Picker integrado ao campo image/video.

## 5. Seguran√ßa
- Supabase Auth mandatory; redirect to /login.
- Row Level Security: allow select for anon where published=true; insert/update only for auth.role='authenticated'.

## 6. Global Settings
- Tabela global_settings(key text PK, value jsonb).
- UI simples p/ editar logo, telefone, email, socials.

## 7. N√£o renderizar header/footer como blocos
- Remover esses blocos da seed; header/footer permanecem hard-coded no site ou carregados de global_settings, n√£o edit√°veis como p√°gina.

## 8. Preserve UX
- Toast sucesso/erro
- Bot√£o Preview abre iframe /?draftSession=xxx
- Confirm ao deletar

N√£o inventar texto/unsplash; usar dados reais dos arquivos de blocos existentes.
Uma vez que esses passos forem seguidos, o Robson vai:

Entrar em /cms (com login).

Ver exatamente as p√°ginas na ordem do menu.

Clicar em um bloco ‚Üí formul√°rio amig√°vel, sem JSON.

Fazer upload de nova foto via Media Library.

Preview ‚Üí ver mudan√ßa.

Publicar ‚Üí site p√∫blico atualiza em tempo real.

Sem depender de voc√™ para trocar headline ou imagem do hero.